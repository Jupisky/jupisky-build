(this["webpackJsonpjupisky-ui"]=this["webpackJsonpjupisky-ui"]||[]).push([[46],{1324:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(12),i=n(38),s=n(390),o=n(0),u=n(42),d=n(24),b=n(280),j=n(18),l=n(1392),O=n(146),x=n(108),f=n(167),h=n(126),m=n(87),p=n(113),g=n(275),v=n(430),k=n(61),C=n(1585),w=n(45),y=n(94),A=n(1406),E=n(1375),G=n(234),S=n(109),T=n(1377),L=n(1390),D=n(323),I=n(1386),N=n(13),P=n(492),B=Object(P.a)({container:{padding:"".concat(N.md," ").concat(N.lg)},amount:{marginLeft:N.sm},buttonRow:{height:"84px",justifyContent:"center",gap:"16px"},gasCostsContainer:{backgroundColor:N.background,padding:"0 ".concat(N.lg)}}),M=n(1385),F=n(1383),R=n(22),z=n(1368),_=n(27),H=n(1413),U=n(2),J=Object(s.a)(B);e.default=function(t){var e=t.onClose,n=t.onPrev,a=t.tx,s=J(),N=Object(u.c)(),P=Object(_.k)(),B=Object(j.n)().nativeCoin,Y=Object(u.d)(G.a),W=Object(o.useMemo)((function(){return Y.find((function(t){return Object(w.f)(t.address,a.token)}))}),[Y,a.token]),X=Object(o.useMemo)((function(){return Object(w.f)(null===W||void 0===W?void 0:W.address,B.address)}),[W,B.address]),q=X?a.recipientAddress:(null===W||void 0===W?void 0:W.address)||"",K=X?Object(b.c)(a.amount,B.decimals):"0",Q=function(t,e,n,a){var s=Object(o.useState)(""),u=Object(i.a)(s,2),d=u[0],j=u[1];return Object(o.useEffect)((function(){var i=function(){var i=Object(r.a)(c.a.mark((function r(){var i,s,o;return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(a){c.next=2;break}return c.abrupt("return");case 2:i=y.a,t||(s=Object(C.a)(a.address),o=Object(b.c)(e,a.decimals),i=s.methods.transfer(n,o).encodeABI()),j(i);case 5:case"end":return c.stop()}}),r)})));return function(){return i.apply(this,arguments)}}();i()}),[t,n,e,a]),d}(X,a.amount,a.recipientAddress,W),V=Object(o.useState)("0"),Z=Object(i.a)(V,2),$=Z[0],tt=Z[1],et=Object(o.useState)(),nt=Object(i.a)(et,2),at=nt[0],ct=nt[1],rt=Object(o.useState)(),it=Object(i.a)(rt,2),st=it[0],ot=it[1],ut=Object(T.b)({txData:Q,txRecipient:q,txType:a.txType,txAmount:K,safeTxGas:$,manualGasPrice:at,manualGasLimit:st}),dt=ut.gasCostFormatted,bt=ut.gasPriceFormatted,jt=ut.gasLimit,lt=ut.gasEstimation,Ot=ut.txEstimationExecutionStatus,xt=ut.isExecution,ft=ut.isCreation,ht=ut.isOffChainSignature,mt=Object(L.a)(Ot),pt=Object(i.a)(mt,2),gt=pt[0],vt=pt[1],kt=Object(S.a)(a.txType,"spendingLimit"),Ct=Object(o.useState)(!0),wt=Object(i.a)(Ct,2),yt=wt[0],At=wt[1],Et=xt&&yt,Gt=function(){var t=Object(r.a)(c.a.mark((function t(n){var r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(vt(D.a.LOADING),P){t.next=5;break}return vt(D.a.READY),Object(R.c)(R.b._802),t.abrupt("return");case 5:if(!(kt&&W&&a.tokenSpendingLimit)){t.next=18;break}return r=X?w.a:W.address,i=Object(g.a)(),t.prev=8,t.next=11,i.methods.executeAllowanceTransfer(P,r,a.recipientAddress,Object(b.c)(a.amount,W.decimals),w.a,0,a.tokenSpendingLimit.delegate,y.a).send({from:a.tokenSpendingLimit.delegate}).on("transactionHash",(function(){return e()}));case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(8),vt(D.a.READY),Object(R.c)(R.b._801,t.t0.message);case 17:return t.abrupt("return");case 18:N(Object(v.b)({safeAddress:P,to:q,valueInWei:K,txData:Q,txNonce:n.safeNonce,safeTxGas:n.safeTxGas,ethParameters:n,notifiedTransaction:k.a.STANDARD_TX,delayExecution:!yt})),e();case 20:case"end":return t.stop()}}),t,null,[[8,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(U.jsx)(M.a,{isOffChainSignature:ht,isExecution:Et,ethGasLimit:jt,ethGasPrice:bt,safeTxGas:lt,closeEditModalCallback:function(t){var e=bt,n=t.ethGasPrice,a=lt,c=t.safeTxGas;n&&e!==n&&ct(t.ethGasPrice),t.ethGasLimit&&jt!==t.ethGasLimit&&ot(t.ethGasLimit),c&&a!==c&&tt(c)},children:function(t,c){return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(z.a,{onClose:e,subTitle:"2 of 2",title:"Send funds"}),Object(U.jsx)(f.a,{}),Object(U.jsxs)(O.a,{className:s.container,children:[Object(U.jsx)(A.a,{}),Object(U.jsx)(l.a,{withArrow:!0}),Object(U.jsx)(p.a,{margin:"xs",children:Object(U.jsx)(m.a,{color:"disabled",noMargin:!0,size:"md",style:{letterSpacing:"-0.5px"},children:"Recipient"})}),Object(U.jsx)(p.a,{align:"center",margin:"md","data-testid":"recipient-review-step",children:Object(U.jsx)(x.a,{xs:12,children:Object(U.jsx)(d.EthHashInfo,{hash:a.recipientAddress,name:a.recipientName,showCopyBtn:!0,showAvatar:!0,explorerUrl:Object(j.f)(a.recipientAddress)})})}),Object(U.jsx)(p.a,{margin:"xs",children:Object(U.jsx)(m.a,{color:"disabled",noMargin:!0,size:"md",style:{letterSpacing:"-0.5px"},children:"Amount"})}),Object(U.jsxs)(p.a,{align:"center",margin:"md",children:[Object(U.jsx)(h.a,{alt:null===W||void 0===W?void 0:W.name,height:28,onError:E.a,src:null===W||void 0===W?void 0:W.logoUri}),Object(U.jsxs)(m.a,{className:s.amount,noMargin:!0,size:"md","data-testid":"amount-".concat(null===W||void 0===W?void 0:W.symbol,"-review-step"),children:[a.amount," ",null===W||void 0===W?void 0:W.symbol]})]}),xt&&!kt&&Object(U.jsx)(H.a,{onChange:At}),!kt&&Object(U.jsx)(F.a,{txParameters:t,onEdit:c,isTransactionCreation:ft,isTransactionExecution:Et,isOffChainSignature:ht})]}),!kt&&Ot!==T.a.LOADING&&Object(U.jsx)("div",{className:s.gasCostsContainer,children:Object(U.jsx)(I.a,{gasCostFormatted:dt,isExecution:Et,isCreation:ft,isOffChainSignature:ht,txEstimationExecutionStatus:Ot})}),Object(U.jsx)(D.b.Footer,{withoutBorder:!kt&&gt!==D.a.LOADING,children:Object(U.jsx)(D.b.Footer.Buttons,{cancelButtonProps:{onClick:n,text:"Back"},confirmButtonProps:{onClick:function(){return Gt(t)},status:gt,text:Ot===T.a.LOADING?"Estimating":void 0,testId:"submit-tx-btn"}})})]})}})}},1375:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n(1379),c=function(t){var e=t.currentTarget;/token_placeholder/.test(e.src)||(e.src=a.a)};n(433)},1379:function(t,e,n){"use strict";e.a=n.p+"static/media/token_placeholder.c1abe466.svg"},1389:function(t,e,n){"use strict";var a=n(8),c=n(60),r=n(7),i=n(9),s=n(10),o=n(11),u=n(0),d=n(2),b=["children"],j=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var t=this.props,e=t.children,n=Object(c.a)(t,b);return Object(d.jsx)("b",Object(a.a)(Object(a.a)({},n),{},{children:e}))}}]),n}(u.PureComponent);e.a=j},1392:function(t,e,n){"use strict";var a,c,r=n(26),i=n(23),s=n(24),o=n(2),u=i.default.div(a||(a=Object(r.a)(["\n  display: flex;\n  align-items: center;\n  margin: 8px 0;\n\n  svg {\n    margin: 0 12px 0 4px;\n  }\n"]))),d=Object(i.default)(s.Divider)(c||(c=Object(r.a)(["\n  width: 100%;\n"])));e.a=function(t){var e=t.withArrow;return Object(o.jsxs)(u,{children:[e&&Object(o.jsx)(s.Icon,{type:"arrowDown",size:"md"}),Object(o.jsx)(d,{})]})}},1406:function(t,e,n){"use strict";var a,c=n(26),r=n(42),i=n(24),s=n(23),o=n(18),u=n(79),d=n(87),b=n(1389),j=n(13),l=n(146),O=n(2),x=Object(s.default)(l.a)(a||(a=Object(c.a)(["\n  font-size: 12px;\n  line-height: 1.08;\n  letter-spacing: -0.5px;\n  background-color: ",";\n  width: fit-content;\n  padding: 5px 10px;\n  margin-top: ",";\n  margin-left: 40px;\n  border-radius: 3px;\n"])),j.border,j.xs);e.a=function(){var t=Object(r.d)(u.j),e=t.address,n=t.ethBalance,a=t.name,c=Object(o.n)().nativeCoin;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(i.EthHashInfo,{hash:e,name:a,explorerUrl:Object(o.f)(e),showAvatar:!0,showCopyBtn:!0}),n&&Object(O.jsx)(x,{children:Object(O.jsxs)(d.a,{noMargin:!0,children:["Balance: ",Object(O.jsx)(b.a,{"data-testid":"current-eth-balance",children:"".concat(n," ").concat(c.symbol)})]})})]})}},1413:function(t,e,n){"use strict";var a=n(566),c=n(708),r=n(113),i=n(87),s=n(2);e.a=function(t){var e=t.onChange;return Object(s.jsxs)(r.a,{margin:"md",children:[Object(s.jsx)(i.a,{noMargin:!0,children:"If you want to sign the transaction now but manually execute it later, click on the checkbox below."}),Object(s.jsx)(a.a,{control:Object(s.jsx)(c.a,{defaultChecked:!0,color:"primary",onChange:function(t){e(t.target.checked)}}),label:"Execute transaction","data-testid":"execute-checkbox"})]})}},1585:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u}));n(1),n(12);var a=n(1713),c=n(1714),r=(n(74),n(150)),i=n.n(r),s=(n(372),n(555),n(244),n(489),n(31)),o=(n(22),i()((function(t){return new(Object(s.g)().eth.Contract)(a.abi,t)}))),u=i()((function(t){return new(Object(s.g)().eth.Contract)(c.abi,t)}))}}]);
//# sourceMappingURL=46.6160b8c2.chunk.js.map