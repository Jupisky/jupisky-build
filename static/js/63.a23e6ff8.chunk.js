(this["webpackJsonpjupisky-ui"]=this["webpackJsonpjupisky-ui"]||[]).push([[63],{1392:function(e,t,n){"use strict";var a,r,c=n(26),i=n(23),o=n(24),s=n(2),u=i.default.div(a||(a=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  margin: 8px 0;\n\n  svg {\n    margin: 0 12px 0 4px;\n  }\n"]))),d=Object(i.default)(o.Divider)(r||(r=Object(c.a)(["\n  width: 100%;\n"])));t.a=function(e){var t=e.withArrow;return Object(s.jsxs)(u,{children:[t&&Object(s.jsx)(o.Icon,{type:"arrowDown",size:"md"}),Object(s.jsx)(d,{})]})}},1413:function(e,t,n){"use strict";var a=n(566),r=n(708),c=n(113),i=n(87),o=n(2);t.a=function(e){var t=e.onChange;return Object(o.jsxs)(c.a,{margin:"md",children:[Object(o.jsx)(i.a,{noMargin:!0,children:"If you want to sign the transaction now but manually execute it later, click on the checkbox below."}),Object(o.jsx)(a.a,{control:Object(o.jsx)(r.a,{defaultChecked:!0,color:"primary",onChange:function(e){t(e.target.checked)}}),label:"Execute transaction","data-testid":"execute-checkbox"})]})}},2588:function(e,t,n){"use strict";n.r(t);var a,r,c,i,o,s,u,d,l,j,b,p,f,O,x,h,m,g,v,w=n(59),C=n(42),S=n(0),y=n(27),A=n(18),k=n(79),T=n(8),E=n(1),I=n.n(E),L=n(12),D=n(38),R=n(26),z=n(23),M=n(24),P=n(1671),N=n(1891),U=n(401),G=n.n(U),B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["https:","http:"];try{var n=new URL(e);return t.includes(n.protocol)}catch(a){return!1}},F=n(181),_=n(335),H=n(34),q=n(323),W=n(514),V=n(2),J=z.default.div(a||(a=Object(R.a)(["\n  padding: ",";\n"])),(function(e){var t=e.theme;return"".concat(t.margin.sm," ").concat(t.margin.lg)})),K=z.default.div(r||(r=Object(R.a)(["\n  display: flex;\n  align-items: center;\n\n  span {\n    margin-right: 4px;\n  }\n"]))),Y=z.default.div(c||(c=Object(R.a)(["\n  margin-top: 15px;\n"]))),X=function(e){var t=e.onTxReject,n=e.onClose,a=e.requestId;return Object(V.jsxs)(J,{children:[Object(V.jsxs)(K,{children:[Object(V.jsx)(M.Icon,{color:"error",size:"md",type:"info"}),Object(V.jsx)(M.Title,{size:"xs",children:"Transaction error"})]}),Object(V.jsx)(M.Text,{size:"lg",children:"This Safe App initiated a transaction which cannot be processed. Please get in touch with the developer of this Safe App for more information."}),Object(V.jsx)(Y,{children:Object(V.jsx)(M.ModalFooterConfirmation,{cancelText:"Cancel",handleCancel:function(){return t(a),void n()},handleOk:function(){},okDisabled:!0,okText:"Submit"})})]})},Z=n(47),$=n(80),Q=n(430),ee=n(110),te=n(61),ne=n(550),ae=n(1377),re=n(1368),ce=n(1386),ie=n(1385),oe=n(1383),se=n(13),ue=n(1390),de=n(307),le=n.n(de),je=z.default.div(i||(i=Object(R.a)(["\n  display: flex;\n  align-items: center;\n\n  > :nth-child(2) {\n    margin-left: ","px;\n  }\n"])),(function(e){return e.margin})),be=z.default.div(o||(o=Object(R.a)(["\n  margin-bottom: 15px;\n\n  > :nth-child(2) {\n    margin-bottom: 15px;\n  }\n"]))),pe=z.default.div(s||(s=Object(R.a)(["\n  width: 100%;\n  max-height: 260px;\n  overflow-y: auto;\n  border-top: 2px solid ",";\n"])),(function(e){return e.theme.colors.separator})),fe=z.default.div(u||(u=Object(R.a)(["\n  display: flex;\n  justify-content: space-between;\n\n  padding: 0 24px;\n  height: 50px;\n  border-bottom: 2px solid ",";\n\n  :hover {\n    cursor: pointer;\n  }\n"])),(function(e){return e.theme.colors.separator})),Oe=z.default.div(d||(d=Object(R.a)(["\n  margin-bottom: 15px;\n"]))),xe=function(e){try{return Array.isArray(e)||(e=e.split(",")),e.reduce((function(e,t){return e+Object($.hexToBytes)(t).length}),0)}catch(t){return 0}},he=function(e){var t=e.txRecipient,n=e.txData,a=e.txValue,r=e.recipientName,c=Object(A.n)().nativeCoin;return Object(V.jsxs)(be,{children:[Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(M.Text,{size:"lg",strong:!0,children:"Send ".concat(a," ").concat(c.symbol," to:")}),Object(V.jsx)(M.EthHashInfo,{hash:t,showAvatar:!0,textSize:"lg",showCopyBtn:!0,name:r,explorerUrl:Object(A.f)(t)})]}),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(M.Text,{size:"lg",strong:!0,children:"Data (hex encoded):"}),Object(V.jsxs)(je,{margin:5,children:[Object(V.jsxs)(M.Text,{size:"lg",children:[n?xe(n):0," bytes"]}),Object(V.jsx)(M.CopyToClipboardBtn,{textToCopy:n})]})]})]})},me=function(e,t){var n;if("address"===e.type&&(n=Object(V.jsx)(M.EthHashInfo,{hash:e.value,showAvatar:!0,textSize:"lg",showCopyBtn:!0,explorerUrl:Object(A.f)(e.value)})),e.type.startsWith("bytes")&&(n=Object(V.jsxs)(je,{margin:5,children:[Object(V.jsxs)(M.Text,{size:"lg",children:[xe(e.value)," bytes"]}),Object(V.jsx)(M.CopyToClipboardBtn,{textToCopy:e.value})]})),!n){var a=e.value;if(e.type.endsWith("[]"))try{a=JSON.stringify(e.value)}catch(r){}n=Object(V.jsx)(M.Text,{size:"lg",children:a})}return Object(V.jsxs)(Oe,{children:[Object(V.jsxs)(M.Text,{size:"lg",strong:!0,children:[e.name," (",e.type,")"]}),n]},t)},ge=function(e){var t=e.decodedData,n=e.onTxItemClick;return t?Object(V.jsx)(pe,{children:Object(V.jsxs)(fe,{onClick:function(){return n(t)},children:[Object(V.jsx)(M.IconText,{iconSize:"sm",iconType:"code",text:"Contract interaction",textSize:"xl"}),Object(V.jsxs)(je,{margin:20,children:[Object(V.jsx)(M.Text,{size:"xl",children:t.method}),Object(V.jsx)(M.FixedIcon,{type:"chevronRight"})]})]})}):null},ve=function(e){var t=e.decodedData,n=e.onTxItemClick,a=le()(t,"parameters[0].valueDecoded");return a?Object(V.jsx)(pe,{children:a.map((function(e,t){return Object(V.jsxs)(fe,{onClick:function(){return n(e)},children:[Object(V.jsx)(M.IconText,{iconSize:"sm",iconType:"code",text:"Contract interaction",textSize:"xl"}),Object(V.jsxs)(je,{margin:20,children:[e.dataDecoded&&Object(V.jsx)(M.Text,{size:"xl",children:e.dataDecoded.method}),Object(V.jsx)(M.FixedIcon,{type:"chevronRight"})]})]},t)}))}):null},we=function(e){var t=e.txs,n=e.decodedData,a=e.onTxItemClick;return t.length>1?Object(V.jsx)(ve,{decodedData:n,onTxItemClick:a}):Object(V.jsx)(ge,{decodedData:n,onTxItemClick:a})},Ce=n(187),Se=n.n(Ce),ye=function(){var e=Object(L.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===t||void 0===t?void 0:t.length)&&"0x"!==t){e.next=2;break}return e.abrupt("return",null);case 2:return n="".concat(Object(A.w)(),"/data-decoder/"),e.prev=3,e.next=6,Se.a.post(n,{data:t});case 6:return a=e.sent,e.abrupt("return",a.data);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),Ae=n(280),ke=n(146),Te=n(167),Ee=n(1392),Ie=n(234),Le=n(1413),De=z.default.div(l||(l=Object(R.a)(["\n  max-width: 480px;\n  padding: "," "," 0;\n"])),se.md,se.lg),Re=z.default.div(j||(j=Object(R.a)(["\n  background-color: ",";\n  padding: "," ",";\n"])),(function(e){return e.theme.colors.background}),se.sm,se.lg),ze=z.default.div(b||(b=Object(R.a)(["\n  margin: 24px -24px;\n"]))),Me=Object(z.default)(ke.a)(p||(p=Object(R.a)(["\n  background-color: ",";\n  width: fit-content;\n  padding: 5px 10px;\n  border-radius: 3px;\n  margin: 4px 0 0 40px;\n\n  display: flex;\n\n  > :nth-child(1) {\n    margin-right: 5px;\n  }\n"])),(function(e){return e.theme.colors.separator})),Pe=function(e){var t=e.app,n=e.txs,a=e.safeAddress,r=e.ethBalance,c=e.safeName,i=e.params,o=e.hidden,s=e.onUserConfirm,u=e.onClose,d=e.onReject,l=e.requestId,j=e.showDecodedTxData,b=n.length>1,p=Object(S.useState)(null),f=Object(D.a)(p,2),O=f[0],x=f[1],h=Object(C.c)(),m=Object(A.n)().nativeCoin,g=Object(A.f)(a),v=Object(C.d)(Ie.b),w=Object(S.useMemo)((function(){var e;return b?Object(ee.g)():null===(e=n[0])||void 0===e?void 0:e.to}),[n,b]),y=Object(S.useMemo)((function(){var e;return b?Object(ne.a)(n):null===(e=n[0])||void 0===e?void 0:e.data}),[n,b]),k=Object(S.useMemo)((function(){var e,t;return b?"0":(t=null===(e=n[0])||void 0===e?void 0:e.value,Object($.toBN)(t).toString())}),[n,b]),T=Object(S.useMemo)((function(){return b?Z.Operation.DELEGATE:Z.Operation.CALL}),[b]),E=Object(S.useState)("0"),R=Object(D.a)(E,2),z=R[0],P=R[1],N=Object(S.useState)(),U=Object(D.a)(N,2),G=U[0],B=U[1],F=Object(S.useState)(),_=Object(D.a)(F,2),H=_[0],W=_[1],J=Object(ae.b)({txData:y||"",txRecipient:w,operation:T,txAmount:k,safeTxGas:z,manualGasPrice:G,manualGasLimit:H}),K=J.gasLimit,Y=J.gasPriceFormatted,X=J.gasEstimation,se=J.isOffChainSignature,de=J.isCreation,le=J.isExecution,je=J.gasCostFormatted,be=J.txEstimationExecutionStatus,pe=Object(ue.a)(be),fe=Object(D.a)(pe,2),Oe=fe[0],xe=fe[1],me=Object(S.useState)(!0),ge=Object(D.a)(me,2),ve=ge[0],Ce=ge[1],Se=le&&ve;Object(S.useEffect)((function(){var e=function(){var e=Object(L.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(y);case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[y]);var ke=function(e){s(e,l),u()};return Object(V.jsx)(ie.a,{ethGasLimit:K,ethGasPrice:Y,safeTxGas:Math.max(parseInt(X),(null===i||void 0===i?void 0:i.safeTxGas)||0).toString(),closeEditModalCallback:function(e){var t=Y,n=e.ethGasPrice,a=X,r=e.safeTxGas;n&&t!==n&&B(e.ethGasPrice),e.ethGasLimit&&K!==e.ethGasLimit&&W(e.ethGasLimit),r&&a!==r&&P(r)},isOffChainSignature:se,isExecution:Se,children:function(e,i){return Object(V.jsxs)("div",{hidden:o,children:[Object(V.jsx)(re.a,{title:t.name,iconUrl:t.iconUrl,onClose:d}),Object(V.jsx)(Te.a,{}),Object(V.jsxs)(De,{children:[Object(V.jsx)(M.EthHashInfo,{name:c,hash:a,showAvatar:!0,showCopyBtn:!0,explorerUrl:g}),Object(V.jsxs)(Me,{children:[Object(V.jsx)(M.Text,{size:"md",children:"Balance:"}),Object(V.jsx)(M.Text,{size:"md",strong:!0,children:"".concat(r," ").concat(m.symbol)})]}),Object(V.jsx)(Ee.a,{withArrow:!0}),Object(V.jsx)(he,{txRecipient:w,txData:y,txValue:Object(Ae.a)(k,m.decimals)}),Object(V.jsx)(ze,{children:Object(V.jsx)(we,{txs:n,decodedData:O,onTxItemClick:j})}),!b&&Object(V.jsx)(Ee.a,{}),le&&Object(V.jsx)(Le.a,{onChange:Ce}),Object(V.jsx)(oe.a,{txParameters:e,onEdit:i,isTransactionCreation:de,isTransactionExecution:Se,isOffChainSignature:se})]}),be===ae.a.LOADING?null:Object(V.jsx)(Re,{children:Object(V.jsx)(ce.a,{gasCostFormatted:v?je:void 0,isExecution:Se,isCreation:de,isOffChainSignature:se,txEstimationExecutionStatus:be})}),Object(V.jsx)(q.b.Footer,{withoutBorder:be!==ae.a.LOADING,children:Object(V.jsx)(q.b.Footer.Buttons,{cancelButtonProps:{onClick:d},confirmButtonProps:{onClick:function(){return function(e){xe(q.a.LOADING),h(Object(Q.b)({safeAddress:a,to:w,valueInWei:k,txData:y,operation:T,origin:t.id,navigateToTransactionsTab:!1,txNonce:e.safeNonce,safeTxGas:e.safeTxGas,ethParameters:e,notifiedTransaction:te.a.STANDARD_TX,delayExecution:!ve},ke,d)),xe(q.a.READY)}(e)},disabled:!v,status:Oe,text:be===ae.a.LOADING?"Estimating":void 0}})})]})}})},Ne=n(271),Ue=n(515),Ge=n.n(Ue),Be=n(87),Fe=n(113),_e=Object(z.default)(Be.a)(f||(f=Object(R.a)(["\n  && {\n    font-size: ",";\n    white-space: nowrap;\n    max-width: 370px;\n    overflow: hidden;\n  }\n"])),se.lg),He=z.default.img(O||(O=Object(R.a)(["\n  width: 20px;\n  margin-right: 10px;\n"]))),qe=z.default.div(x||(x=Object(R.a)(["\n  display: flex;\n  align-items: center;\n"]))),We=Object(z.default)(Fe.a)(h||(h=Object(R.a)(["\n  padding: "," ",";\n  justify-content: space-between;\n  box-sizing: border-box;\n  max-height: 75px;\n"])),se.md,se.lg),Ve=Object(z.default)(Ge.a)(m||(m=Object(R.a)(["\n  height: 35px;\n  width: 35px;\n"]))),Je=z.default.div(g||(g=Object(R.a)(["\n  margin-right: 15px;\n"]))),Ke=function(e){var t=e.goBack,n=e.iconUrl,a=e.title,r=e.onClose;return Object(V.jsxs)(We,{align:"center",grow:!0,children:[Object(V.jsxs)(qe,{children:[t&&Object(V.jsx)(Je,{children:Object(V.jsx)(Ne.a,{onClick:t,children:Object(V.jsx)(M.Icon,{type:"arrowLeft",size:"md"})})}),n&&Object(V.jsx)(He,{alt:a,src:n}),Object(V.jsx)(_e,{noMargin:!0,weight:"bolder",title:a,children:a})]}),Object(V.jsx)(Ne.a,{disableRipple:!0,onClick:r,children:Object(V.jsx)(Ve,{})})]})},Ye=z.default.div(v||(v=Object(R.a)(["\n  max-width: 480px;\n  padding: "," ",";\n  word-break: break-word;\n"])),se.md,se.lg);var Xe,Ze,$e,Qe,et,tt,nt,at,rt,ct,it,ot,st,ut,dt,lt,jt,bt,pt,ft,Ot,xt,ht,mt,gt,vt,wt,Ct,St,yt,At=function(e){var t,n,a=e.hideDecodedTxData,r=e.onClose,c=e.decodedTxData,i=Object(A.n)().nativeCoin;if(void 0!==c.operation){var o,s=Object(Ae.a)(c.value,i.decimals);n=Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(he,{txRecipient:c.to,txData:c.data,txValue:s}),null===(o=c.dataDecoded)||void 0===o?void 0:o.parameters.map((function(e,t){return me(e,t)}))]})}else n=Object(V.jsx)(V.Fragment,{children:c.parameters.map((function(e,t){return me(e,t)}))});return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ke,{title:(null===(t=c.dataDecoded)||void 0===t?void 0:t.method)||c.method,onClose:r,goBack:a}),Object(V.jsx)(Te.a,{}),Object(V.jsx)(Ye,{children:n})]})},kt=function(e){var t=Object(S.useState)(),n=Object(D.a)(t,2),a=n[0],r=n[1],c=!e.txs.length||e.txs.some((function(e){return!function(e){return!!["string","number"].includes(typeof e.value)&&!("string"===typeof e.value&&!/^(0x)?[0-9a-f]+$/i.test(e.value))&&void 0===Object(W.k)(e.to)&&!!e.data&&"string"===typeof e.data}(e)})),i=r,o=function(){return r(void 0)},s=function(){e.onClose(),e.onTxReject(e.requestId)};return c?Object(V.jsx)(q.c,{description:"Safe App transaction",title:"Safe App transaction",open:e.isOpen,children:Object(V.jsx)(X,Object(T.a)({},e))}):Object(V.jsxs)(q.c,{description:"Safe App transaction",title:"Safe App transaction",open:e.isOpen,children:[a&&Object(V.jsx)(At,{onClose:function(){o(),s()},hideDecodedTxData:o,decodedTxData:a}),Object(V.jsx)(Pe,Object(T.a)(Object(T.a)({},e),{},{onReject:s,showDecodedTxData:i,hidden:!!a}))]})},Tt=n(378),Et=n(528),It=n(7),Lt=n(22),Dt=function e(t,n){var a=this;Object(It.a)(this,e),this.iframeRef=void 0,this.handlers=new Map,this.app=void 0,this.on=function(e,t){a.handlers.set(e,t)},this.isValidMessage=function(e){var t=e.source.parent===window.parent,n=Object.values(P.Methods).includes(e.data.method);return t&&n},this.canHandleMessage=function(e){return Boolean(a.handlers.get(e.data.method))},this.send=function(e,t){var n,r,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(P.getSDKVersion)(),o=c?P.MessageFormatter.makeErrorResponse(t,e,i):P.MessageFormatter.makeResponse(t,e,i);null===(n=a.iframeRef.current)||void 0===n||null===(r=n.contentWindow)||void 0===r||r.postMessage(o,"*")},this.handleIncomingMessage=function(){var e=Object(L.a)(I.a.mark((function e(t){var n,r,c,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.isValidMessage(t),r=a.canHandleMessage(t),!n||!r){e.next=15;break}return c=a.handlers.get(t.data.method),e.prev=4,e.next=7,c(t);case 7:"undefined"!==typeof(i=e.sent)&&a.send(i,t.data.id),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),a.send(e.t0.message,t.data.id,!0),Object(Lt.d)(Lt.b._901,e.t0.message,{contexts:{safeApp:a.app,request:t.data}});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),this.clear=function(){window.removeEventListener("message",a.handleIncomingMessage)},this.iframeRef=t,this.app=n,window.addEventListener("message",this.handleIncomingMessage)},Rt=n(697),zt=n(690),Mt=n(324),Pt=n(69),Nt={isOpen:!1,message:"",requestId:""},Ut=n(60),Gt=n(31),Bt=n(45),Ft=n(575),_t=Object(A.n)().nativeCoin,Ht=z.default.div(Xe||(Xe=Object(R.a)(["\n  max-width: 480px;\n  padding: "," "," 0;\n"])),se.md,se.lg),qt=z.default.div(Ze||(Ze=Object(R.a)(["\n  background-color: ",";\n  padding: "," ",";\n"])),(function(e){return e.theme.colors.background}),se.sm,se.lg),Wt=Object(z.default)(ke.a)($e||($e=Object(R.a)(["\n  background-color: ",";\n  width: fit-content;\n  padding: 5px 10px;\n  border-radius: 3px;\n  margin: 4px 0 0 40px;\n\n  display: flex;\n\n  > :nth-child(1) {\n    margin-right: 5px;\n  }\n"])),(function(e){return e.theme.colors.separator})),Vt=Object(z.default)(Ft.a)(Qe||(Qe=Object(R.a)(["\n  &.MuiFormControl-root {\n    padding-bottom: ",";\n  }\n"])),(function(e){return e.theme.margin.md})),Jt=Object(z.default)(Be.a)(et||(et=Object(R.a)(["\n  display: flex;\n  align-items: center;\n\n  > span:first-child {\n    margin-right: ",";\n  }\n"])),(function(e){return e.theme.margin.xs})),Kt=function(e){var t=e.app,n=e.safeAddress,a=e.ethBalance,r=e.safeName,c=e.onUserConfirm,i=e.onClose,o=e.onTxReject,s=e.requestId,u=e.utf8Message,d=e.txData,l=e.txRecipient,j=Object(C.c)(),b=Object(A.f)(n),p=Object(C.d)(Ie.b),f=Object(S.useState)("0"),O=Object(D.a)(f,2),x=O[0],h=O[1],m=Object(S.useState)(),g=Object(D.a)(m,2),v=g[0],w=g[1],y=Object(S.useState)(),k=Object(D.a)(y,2),T=k[0],E=k[1],I=Object(ae.b)({txData:d||"",txRecipient:l,operation:Z.Operation.DELEGATE,txAmount:"0",safeTxGas:x,manualGasPrice:v,manualGasLimit:T}),L=I.gasLimit,R=I.gasPriceFormatted,z=I.gasEstimation,P=I.isOffChainSignature,N=I.isCreation,U=I.isExecution,G=I.gasCostFormatted,B=I.txEstimationExecutionStatus,F=Object(ue.a)(B),_=Object(D.a)(F,2),H=_[0],W=_[1],J=function(){o(s),i()},K=function(e){c(e,s),i()};return Object(V.jsx)(ie.a,{ethGasLimit:L,ethGasPrice:R,safeTxGas:z,closeEditModalCallback:function(e){var t=R,n=e.ethGasPrice,a=z,r=e.safeTxGas;n&&t!==n&&w(e.ethGasPrice),e.ethGasLimit&&L!==e.ethGasLimit&&E(e.ethGasLimit),r&&a!==r&&h(r)},isOffChainSignature:P,isExecution:U,children:function(e,c){return Object(V.jsxs)("div",{children:[Object(V.jsx)(Ke,{title:t.name,iconUrl:t.iconUrl,onClose:J}),Object(V.jsx)(Te.a,{}),Object(V.jsxs)(Ht,{children:[Object(V.jsx)(M.EthHashInfo,{name:r,hash:n,showAvatar:!0,showCopyBtn:!0,explorerUrl:b}),Object(V.jsxs)(Wt,{children:[Object(V.jsx)(M.Text,{size:"md",children:"Balance:"}),Object(V.jsx)(M.Text,{size:"md",strong:!0,children:"".concat(a," ").concat(_t.symbol)})]}),Object(V.jsx)(Ee.a,{withArrow:!0}),Object(V.jsx)(he,{txRecipient:l,txData:d,txValue:"0",recipientName:"SignMessageLib"}),Object(V.jsx)(M.Text,{size:"lg",strong:!0,children:"Signing message:"}),Object(V.jsx)(Vt,{rows:"2",multiline:!0,disabled:!0,fullWidth:!0,label:"Message to sign",inputProps:{type:"text",value:u,name:"Message to sign",onChange:function(){},placeholder:""},InputProps:{disableUnderline:!0}}),Object(V.jsxs)(Jt,{children:[Object(V.jsx)(M.Icon,{size:"md",type:"info",color:"warning"}),"Signing a message with the Gnosis Safe requires a transaction on the blockchain"]}),Object(V.jsx)(oe.a,{txParameters:e,onEdit:c,isTransactionCreation:N,isTransactionExecution:U,isOffChainSignature:P})]}),B===ae.a.LOADING?null:Object(V.jsx)(qt,{children:Object(V.jsx)(ce.a,{gasCostFormatted:p?G:void 0,isExecution:U,isCreation:N,isOffChainSignature:P,txEstimationExecutionStatus:B})}),Object(V.jsx)(q.b.Footer,{withoutBorder:B!==ae.a.LOADING,children:Object(V.jsx)(q.b.Footer.Buttons,{cancelButtonProps:{onClick:J},confirmButtonProps:{onClick:function(){return function(e){W(q.a.LOADING),j(Object(Q.b)({safeAddress:n,to:l,valueInWei:"0",txData:d,operation:Z.Operation.DELEGATE,origin:t.id,navigateToTransactionsTab:!1,txNonce:e.safeNonce,safeTxGas:e.safeTxGas,ethParameters:e,notifiedTransaction:te.a.STANDARD_TX},K,J)),W(q.a.READY)}(e)},disabled:!p,status:H,text:B===ae.a.LOADING?"Estimating":void 0}})})]})}})},Yt=["message","isOpen"],Xt=Object(A.l)(),Zt=function(e){var t=e.message,n=e.isOpen,a=Object(Ut.a)(e,Yt),r=Object(Gt.h)(),c=Object(ee.k)(Xt)||Bt.a,i=Object(ee.l)(r,Xt).methods.signMessage(Object(P.calculateMessageHash)(t)).encodeABI(),o=function(e){var t=Object(Gt.h)(),n=t.utils.isHexStrict(e.toString()),a=e;if(n)try{a=t.utils.hexToUtf8(e)}catch(r){}return a}(t);return Object(V.jsx)(q.c,{description:"Safe App transaction",title:"Safe App transaction",open:n,children:Object(V.jsx)(Kt,Object(T.a)(Object(T.a)({},a),{},{txRecipient:c,txData:i,utf8Message:o}))})},$t=z.default.div(tt||(tt=Object(R.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  margin: 0 -16px;\n"]))),Qt=Object(z.default)(M.Card)(nt||(nt=Object(R.a)(["\n  flex-grow: 1;\n  padding: 0;\n  border-radius: 0;\n"]))),en=z.default.iframe(at||(at=Object(R.a)(["\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n  box-sizing: border-box;\n  display: ",";\n"])),(function(e){return e.isLoading?"none":"block"})),tn={isOpen:!1,txs:[],requestId:"",params:void 0},nn=new G.a.providers.HttpProvider(Object(A.s)(),{timeout:1e4}),an=function(e){var t=e.appUrl,n=Object(C.d)(k.a),a=n.address,r=n.ethBalance,c=n.owners,i=n.threshold,o=Object(C.d)(Pt.a),s=Object(C.d)((function(e){return Object(Mt.a)(e,{address:a})})),u=Object(F.g)().trackEvent,d=Object(S.useRef)(null),l=Object(S.useState)(tn),j=Object(D.a)(l,2),b=j[0],p=j[1],f=Object(S.useState)(!0),O=Object(D.a)(f,2),x=O[0],h=O[1],m=Object(S.useState)(),g=Object(D.a)(m,2),v=g[0],w=g[1],y=function(){var e=Object(S.useState)(Nt),t=Object(D.a)(e,2),n=t[0],a=t[1];return[n,Object(S.useCallback)((function(e,t){a(Object(T.a)(Object(T.a)({},Nt),{},{isOpen:!0,message:e,requestId:t}))}),[]),Object(S.useCallback)((function(){a(Nt)}),[])]}(),E=Object(D.a)(y,3),R=E[0],z=E[1],U=E[2],G=Object(S.useRef)(),B=Object(S.useState)(!1),q=Object(D.a)(B,2),W=q[0],J=q[1],K=Object(S.useRef)(),Y=Object(S.useState)(!1),X=Object(D.a)(Y,2)[1];Object(S.useEffect)((function(){var e=function(){clearTimeout(G.current),clearTimeout(K.current)};return x?(G.current=window.setTimeout((function(){J(!0)}),H.r),K.current=window.setTimeout((function(){X((function(){throw Error("There was an error loading the Jupisky App. There might be a problem with the App provider.")}))}),3e4)):(e(),J(!1)),function(){e()}}),[x]);var Z=Object(S.useCallback)((function(e,t,n){return p({isOpen:!0,txs:e,requestId:n,params:t})}),[p]),$=Object(S.useCallback)((function(){return p(tn)}),[p]),Q=function(e,t,n,a){var r=Object(Tt.useSnackbar)(),c=r.enqueueSnackbar,i=r.closeSnackbar,o=Object(C.d)(k.j),s=o.address,u=o.ethBalance,d=o.name,l=Object(C.c)(),j=Object(S.useCallback)((function(t,n){var r,c,i=Object(T.a)(Object(T.a)({},t),{},{requestId:n||Math.trunc(window.performance.now()),version:"0.4.2"});a&&e&&(null===(r=a.current)||void 0===r||null===(c=r.contentWindow)||void 0===c||c.postMessage(i,e.url))}),[a,e]);return Object(S.useEffect)((function(){var n=function(e,n,a){if(e)switch(e){case N.SDK_MESSAGES.SEND_TRANSACTIONS:n&&t(n,void 0,a);break;case N.SDK_MESSAGES.SAFE_APP_SDK_INITIALIZED:var r={messageId:N.INTERFACE_MESSAGES.ON_SAFE_INFO,data:{safeAddress:s,network:Object(A.p)().toLowerCase(),ethBalance:u}},c={messageId:N.INTERFACE_MESSAGES.ENV_INFO,data:{txServiceUrl:Object(A.w)()}};j(r),j(c);break;default:console.error("ThirdPartyApp: A message was received with an unknown message id ".concat(e,"."))}},a=function(){var t=Object(L.a)(I.a.mark((function t(a){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.origin!==window.origin){t.next=2;break}return t.abrupt("return");case 2:if(null===e||void 0===e?void 0:e.url.includes(a.origin)){t.next=5;break}return console.error("ThirdPartyApp: A message was received from an unknown origin ".concat(a.origin)),t.abrupt("return");case 5:n(a.data.messageId,a.data.data,a.data.requestId);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return window.addEventListener("message",a),function(){window.removeEventListener("message",a)}}),[n,i,l,c,u,t,s,d,e,j]),{sendMessageToIframe:j}}(v,Z,$,d),ee=Q.sendMessageToIframe,te=Object(S.useCallback)((function(){var e=d.current;e&&function(e,t){try{var n=new URL(e),a=new URL(t);return n.href===a.href}catch(r){return!1}}(e.src,t)&&(h(!1),ee({messageId:N.INTERFACE_MESSAGES.ON_SAFE_INFO,data:{safeAddress:a,network:Object(A.p)().toLowerCase(),ethBalance:r}}))}),[r,a,t,ee]),ne=function(e,t){var n=Object(S.useState)(void 0),a=Object(D.a)(n,2),r=a[0],c=a[1];return Object(S.useEffect)((function(){var n;return t&&function(e,t){n=new Dt(e,t),c(n)}(e,t),function(){var e;null===(e=n)||void 0===e||e.clear()}}),[t,e]),r}(d,v);Object(S.useEffect)((function(){null===ne||void 0===ne||ne.on("getEnvInfo",(function(){return{txServiceUrl:Object(A.w)()}})),null===ne||void 0===ne||ne.on(P.Methods.getTxBySafeTxHash,function(){var e=Object(L.a)(I.a.mark((function e(t){var n,a,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,a=n.safeTxHash,e.next=3,Object(zt.a)(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===ne||void 0===ne||ne.on(P.Methods.getSafeInfo,(function(){return{safeAddress:a,network:Object(A.p)(),chainId:parseInt(o,10),owners:c,threshold:i}})),null===ne||void 0===ne||ne.on(P.Methods.getSafeBalances,function(){var e=Object(L.a)(I.a.mark((function e(t){var n,r,c,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,r=n.currency,c=void 0===r?"usd":r,e.next=3,Object(Rt.a)({safeAddress:a,selectedCurrency:c});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===ne||void 0===ne||ne.on(P.Methods.rpcCall,function(){var e=Object(L.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.params,e.prev=1,a=new Promise((function(e,t){nn.send({jsonrpc:"2.0",method:n.call,params:n.params,id:"1"},(function(n,a){(n||(null===a||void 0===a?void 0:a.error))&&t(n||(null===a||void 0===a?void 0:a.error)),e(null===a||void 0===a?void 0:a.result)}))})),e.abrupt("return",a);case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),null===ne||void 0===ne||ne.on(P.Methods.sendTransactions,(function(e){Z(e.data.params.txs,e.data.params.params,e.data.id)})),null===ne||void 0===ne||ne.on(P.Methods.signMessage,function(){var e=Object(L.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data.params,a=n.message,z(a,t.data.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[ne,Z,a,c,i,z,o]);var ae=function(e,t){ee({messageId:N.INTERFACE_MESSAGES.TRANSACTION_CONFIRMED,data:{safeTxHash:e}},b.requestId),null===ne||void 0===ne||ne.send({safeTxHash:e},t)},re=function(e){ee({messageId:N.INTERFACE_MESSAGES.TRANSACTION_REJECTED,data:{}},b.requestId),null===ne||void 0===ne||ne.send("Transaction was rejected",e,!0)};return Object(S.useEffect)((function(){if(!t)throw Error("App url No provided or it is invalid.");var e=function(){var e=Object(L.a)(I.a.mark((function e(){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Et.d)(t);case 3:n=e.sent,w(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Object(Lt.c)(Lt.b._900,"".concat(t,", ").concat(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(S.useEffect)((function(){v&&u(Object(T.a)(Object(T.a)({},F.b.SAFE_APP),{},{label:v.name}))}),[v,u]),v?Object(V.jsxs)($t,{children:[Object(V.jsxs)(Qt,{children:[x&&Object(V.jsxs)(_.a,{style:{flexDirection:"column"},children:[W&&Object(V.jsx)(M.Title,{size:"xs",children:"The Safe App is taking too long to load, consider refreshing."}),Object(V.jsx)(M.Loader,{size:"md"})]}),Object(V.jsx)(en,{isLoading:x,frameBorder:"0",id:"iframe-".concat(t),ref:d,src:t,title:v.name,onLoad:te})]}),Object(V.jsx)(kt,{isOpen:b.isOpen,app:v,safeAddress:a,ethBalance:r,safeName:s,txs:b.txs,onClose:$,requestId:b.requestId,onUserConfirm:ae,params:b.params,onTxReject:re}),Object(V.jsx)(Zt,{isOpen:R.isOpen,app:v,safeAddress:a,ethBalance:r,safeName:s,onClose:U,requestId:R.requestId,message:R.message,onUserConfirm:ae,onTxReject:re})]}):Object(V.jsxs)(_.a,{style:{flexDirection:"column"},children:[W&&Object(V.jsx)(M.Title,{size:"xs",children:"The Jupisky App is taking too long to load. There might be a problem with the App provider."}),Object(V.jsx)(M.Loader,{size:"md"})]})},rn=n(2613),cn=n(2623),on=n(694),sn=n(108),un=n(149),dn=n(2579),ln=n.n(dn),jn=n(1894),bn=n.n(jn),pn=n(257),fn=n.p+"static/media/addApp.8e52bdd5.svg",On=n(334),xn=n(688),hn=Object(z.keyframes)(rt||(rt=Object(R.a)(["\n  0% {\n    background-position: 0% 54%;\n  }\n  50% {\n    background-position: 100% 47%;\n  }\n  100% {\n    background-position: 0% 54%;\n  }\n"]))),mn=z.default.div(ct||(ct=Object(R.a)(["\n  height: 60px;\n  width: 60px;\n  border-radius: 30px;\n  margin: 0 auto;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),hn),gn=z.default.div(it||(it=Object(R.a)(["\n  height: 24px;\n  width: 160px;\n  margin: 24px auto;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),hn),vn=z.default.div(ot||(ot=Object(R.a)(["\n  height: 16px;\n  width: 200px;\n  background-color: lightgrey;\n  background: linear-gradient(84deg, lightgrey, transparent);\n  background-size: 400% 400%;\n  animation: "," 1.5s ease infinite;\n"])),hn),wn=Object(z.default)(M.Card)(st||(st=Object(R.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: space-evenly;\n  box-shadow: 1px 2px 10px 0 ",";\n  height: 232px !important;\n  box-sizing: border-box;\n  cursor: pointer;\n  color: ",";\n\n  :hover {\n    box-shadow: 1px 2px 16px 0 ",";\n    transition: box-shadow 0.3s ease-in-out;\n    background-color: ",";\n    cursor: pointer;\n\n    h5 {\n      color: ",";\n    }\n  }\n"])),(function(e){var t=e.theme;return Object(pn.alpha)(t.colors.shadow.color,.18)}),(function(e){return e.theme.colors.secondary}),(function(e){var t=e.theme;return Object(pn.alpha)(t.colors.shadow.color,.35)}),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.primary})),Cn=Object(z.default)(Ne.a)(ut||(ut=Object(R.a)(["\n  &.MuiButtonBase-root {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    z-index: 10;\n    padding: 5px;\n    opacity: 0;\n\n    transition: opacity 0.2s ease-in-out;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"]))),Sn=Object(z.default)(rn.a.div)(dt||(dt=Object(R.a)(["\n  position: relative;\n\n  &:hover {\n    "," {\n      opacity: 1;\n    }\n  }\n"])),Cn),yn=z.default.img(lt||(lt=Object(R.a)(["\n  width: ",";\n  height: ",";\n  margin-top: ",";\n  object-fit: contain;\n"])),(function(e){return"md"===e.size?"60px":"102px"}),(function(e){return"md"===e.size?"60px":"92px"}),(function(e){return"md"===e.size?"0":"-16px"})),An=Object(z.default)(M.Title)(jt||(jt=Object(R.a)(["\n  text-align: center;\n  margin: 16px 0 9px 0;\n"]))),kn=Object(z.default)(M.Text)(bt||(bt=Object(R.a)(["\n  text-align: center;\n  height: 72px;\n  line-height: 24px;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n"]))),Tn=Object(z.default)(un.a)(pt||(pt=Object(R.a)(["\n  text-decoration: none;\n"]))),En=function(e){e.currentTarget.onerror=null,e.currentTarget.src=xn.a},In=function(e,t){return t?"Unpin ".concat(e):"Pin ".concat(e)},Ln=function(e){var t=e.app,n=e.iconSize,a=void 0===n?"md":n,r=e.to,c=e.onPin,i=e.onRemove,o=e.pinned,s=void 0!==o&&o;if(function(e){return On.a.LOADING===e.fetchStatus}(t))return Object(V.jsx)(Sn,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:Object(V.jsxs)(wn,{children:[Object(V.jsx)(mn,{}),Object(V.jsx)(gn,{}),Object(V.jsx)(vn,{}),Object(V.jsx)(vn,{})]})});var u=Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(wn,{children:[Object(V.jsx)(yn,{alt:"".concat(t.name||"App"," Logo"),src:t.iconUrl,onError:En,size:a}),Object(V.jsx)(An,{size:"xs",children:t.name}),Object(V.jsxs)(kn,{size:"lg",children:[t.description," "]})]}),c&&Object(V.jsx)(Cn,{"aria-label":In(t.name,s),title:In(t.name,s),onClick:function(e){e.preventDefault(),c(t)},children:s?Object(V.jsx)(ln.a,{}):Object(V.jsx)(bn.a,{})}),i&&Object(V.jsx)(Cn,{"aria-label":"Remove an app",title:"Remove app",onClick:function(e){e.preventDefault(),i(t)},children:Object(V.jsx)(M.Icon,{size:"sm",type:"delete",color:"error"})})]});return Object(V.jsx)(Sn,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:Object(V.jsx)(Tn,{to:r,children:u})})},Dn=function(e){var t=e.onClick;return Object(V.jsx)(Sn,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:Object(V.jsxs)(wn,{children:[Object(V.jsx)(yn,{alt:"PlayStation gamepad symbols",src:fn,onError:En,size:"lg"}),Object(V.jsx)(M.Button,{size:"md",color:"primary",variant:"contained",onClick:t,children:"Add custom app"})]})})},Rn=n(498),zn=n(1266),Mn=n(1489),Pn=n.n(Mn),Nn=n(2580),Un=n.n(Nn),Gn=Object(z.default)(M.Card)(ft||(ft=Object(R.a)(["\n  width: 100%;\n  box-sizing: border-box;\n"]))),Bn=function(e){var t=e.value,n=e.onValueChange;return Object(V.jsx)(Gn,{children:Object(V.jsx)(zn.a,{inputProps:{"aria-label":"search"},startAdornment:Object(V.jsx)(Pn.a,{}),endAdornment:t&&Object(V.jsx)(Ne.a,{"aria-label":"Clear the search",onClick:function(){return n("")},children:Object(V.jsx)(Un.a,{})}),onChange:function(e){return n(e.target.value)},placeholder:"e.g Compound",value:t,style:{width:"100%"}})})},Fn=z.default.div(Ot||(Ot=Object(R.a)(["\n  max-width: 650px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: ",";\n  margin-bottom: ",";\n\n  & > p {\n    text-align: center;\n  }\n"])),(function(e){return e.theme.margin.xxl}),(function(e){return e.theme.margin.xxl})),_n=Object(z.default)(M.Button)(xt||(xt=Object(R.a)(["\n  margin-top: ",";\n  max-width: 300px;\n"])),(function(e){return e.theme.margin.md})),Hn=function(e){var t=e.query,n=e.onWalletConnectSearch;return Object(V.jsxs)(Fn,{children:[Object(V.jsxs)(M.Text,{size:"xl",children:["No apps found matching ",Object(V.jsx)("b",{children:t}),". Connect to dApps that haven't yet been integrated with the Safe using the WalletConnect App."]}),Object(V.jsx)(_n,{onClick:n,size:"md",children:"Search WalletConnect"})]})},qn=n(1376),Wn=n(126),Vn=n(1445),Jn=n(1359),Kn=n(1364),Yn=n(2581),Xn=n.n(Yn),Zn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return Object(S.useCallback)(Xn()(e,t,n),[e,t,n])},$n=function(e){return B(e)?void 0:"Invalid URL"},Qn=Object(Vn.a)({field:"appUrl",updates:{appUrl:function(){var e=Object(L.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!B(t)&&Object(Bt.e)(t),!e.t0){e.next=5;break}return e.next=4,Object(Et.f)(t);case 4:e.t0=e.sent;case 5:if(!(n=e.t0)){e.next=8;break}return e.abrupt("return",n);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),ea=function(e){var t=e.onAppInfo,n=e.onLoading,a=e.onError,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,a=Object(S.useRef)(e),r=Object(S.useState)(e),c=Object(D.a)(r,2),i=c[0],o=c[1],s=Zn((function(e){return o(e)}),t,n);return Object(S.useEffect)((function(){if(e!==a.current)return s(e),a.current=e,s.cancel}),[s,e]),i}(Object(Jn.c)("appUrl",{subscription:{value:!0}}).input.value,500);return Object(S.useEffect)((function(){var e=function(){var e=Object(L.a)(I.a.mark((function e(){var c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,Object(Et.d)(r);case 4:c=e.sent,t(Object(T.a)({},c)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),null===a||void 0===a||a(e.t0);case 11:n(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();B(r)&&e()}),[r,t,a,n]),null},ta=Object(z.default)(Kn.a)(ht||(ht=Object(R.a)(["\n  && {\n    width: 100%;\n  }\n"]))),na=function(e){var t=e.appList,n=Object(Jn.e)({subscription:{visited:!0}}).visited,a=(null===n||void 0===n?void 0:n.appUrl)?Object(W.d)(W.p,$n,Object(Et.h)(t)):void 0;return Object(V.jsx)(ta,{label:"App URL",name:"appUrl",placeholder:"App URL",type:"text",component:M.TextField,validate:a,autoComplete:"off"})},aa=function(e){var t=e.appInfo,n=e.onCancel,a=Object(Jn.e)({subscription:{valid:!0,validating:!0,visited:!0}}),r=a.valid,c=a.validating,i=a.visited,o=Object(S.useMemo)((function(){var e=(null===i||void 0===i?void 0:i.agreementAccepted)&&(null===i||void 0===i?void 0:i.appUrl);return c||!r||!e||!Object(Et.g)(t)}),[c,r,i,t]);return Object(V.jsx)(q.b.Footer.Buttons,{cancelButtonProps:{onClick:n},confirmButtonProps:{disabled:o,text:"Add"}})},ra=Object(z.default)(M.TextField)(mt||(mt=Object(R.a)(["\n  && {\n    width: 385px;\n  }\n"]))),ca=z.default.div(gt||(gt=Object(R.a)(["\n  display: flex;\n  margin: 36px 0 24px 0;\n\n  img {\n    margin-right: 10px;\n  }\n"]))),ia=Object(z.default)(M.Link)(vt||(vt=Object(R.a)(["\n  inline-size: fit-content;\n"]))),oa=z.default.div(wt||(wt=Object(R.a)(["\n  display: flex;\n  margin-bottom: 24px;\n  flex-direction: column;\n  svg {\n    position: relative;\n    top: 4px;\n    left: 4px;\n  }\n"]))),sa=z.default.div(Ct||(Ct=Object(R.a)(["\n  height: 55px;\n  width: 65px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),ua=Object(z.default)(M.Loader)(St||(St=Object(R.a)(["\n  margin-right: 15px;\n"]))),da={appUrl:"",agreementAccepted:!1},la=Object(Et.e)(),ja=function(e){var t=e.appList,n=e.closeModal,a=e.onAddApp,r=Object(S.useState)(la),c=Object(D.a)(r,2),i=c[0],o=c[1],s=Object(S.useState)(),u=Object(D.a)(s,2),d=u[0],l=u[1],j=Object(w.h)(),b=Object(S.useState)(!1),p=Object(D.a)(b,2),f=p[0],O=p[1],x=Object(S.useCallback)(Object(L.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(i),j.push({pathname:Object(y.m)(y.g.APPS,Object(y.j)()),search:"?appUrl=".concat(encodeURIComponent(i.url))});case 2:case"end":return e.stop()}}),e)}))),[j,i,a]);Object(S.useEffect)((function(){f&&l(void 0)}),[f]);var h=Object(S.useCallback)((function(e){l(e.message),Object(Lt.c)(Lt.b._903,e.message),o(la)}),[o]);return Object(V.jsx)(qn.a,{decorators:[Qn],initialValues:da,onSubmit:x,testId:"add-apps-form",children:function(){return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(q.b.Body,{children:[Object(V.jsxs)(oa,{children:[Object(V.jsx)(M.Text,{size:"xl",as:"span",color:"secondary",children:"Jupisky Apps are third-party extensions."}),Object(V.jsxs)(ia,{href:"https://jupisky.com",target:"_blank",rel:"noreferrer",title:"Learn more about building Jupisky Apps",children:[Object(V.jsx)(M.Text,{size:"xl",as:"span",color:"primary",children:"Learn more about building Jupisky Apps."}),Object(V.jsx)(M.Icon,{size:"sm",type:"externalLink",color:"primary"})]})]}),Object(V.jsx)(na,{appList:t}),Object(V.jsx)(ea,{onAppInfo:o,onLoading:O,onError:h}),Object(V.jsxs)(ca,{children:[f?Object(V.jsx)(sa,{children:Object(V.jsx)(ua,{size:"sm"})}):Object(V.jsx)(Wn.a,{alt:"Token image",width:55,src:i.iconUrl}),Object(V.jsx)(ra,{label:"App name",readOnly:!0,meta:{error:d},value:f?"Loading...":i.name===la.name?"":i.name,onChange:function(){}})]})]}),Object(V.jsx)(q.b.Footer,{children:Object(V.jsx)(aa,{appInfo:i,onCancel:n})})]})}})},ba=n(93),pa=n(82);!function(e){e.SAFE_APPS="/safe-apps/"}(yt||(yt={}));var fa,Oa,xa,ha,ma,ga,va,wa,Ca,Sa=function(){var e=Object(L.a)(I.a.mark((function e(){var t,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(A.l)(),n=Se.a.get("".concat(H.c,"jupisky-apps/main/appListChain").concat(t,".json")).then((function(e){return e.data})),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ya=n(111),Aa=n(81),ka=function(){var e=function(){var e=Object(S.useState)([]),t=Object(D.a)(e,2),n=t[0],a=t[1],r=Object(S.useState)(On.a.NOT_ASKED),c=Object(D.a)(r,2),i=c[0],o=c[1],s=Object(C.c)();return Object(S.useEffect)((function(){var e=function(){var e=Object(L.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(On.a.LOADING),e.prev=1,e.next=4,Sa();case 4:if(!(null===(t=e.sent)||void 0===t?void 0:t.length)){e.next=10;break}a(t.map((function(e){return Object(T.a)(Object(T.a)({},e),{},{fetchStatus:On.a.SUCCESS,id:String(e.id)})}))),o(On.a.SUCCESS),e.next=11;break;case 10:throw new Error("Empty apps array \ud83e\udd2c");case 11:e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),o(On.a.ERROR),Object(Lt.c)(Lt.b._902,e.t0.message),s(Object(ya.b)(Aa.a.SAFE_APPS_FETCH_ERROR_MSG));case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[s]),{remoteSafeApps:n,status:i}}(),t=e.remoteSafeApps,n=e.status,a=function(){var e=Object(S.useState)([]),t=Object(D.a)(e,2),n=t[0],a=t[1],r=Object(S.useState)(!1),c=Object(D.a)(r,2),i=c[0],o=c[1],s=Object(S.useCallback)((function(e){a(e),Object(pa.e)(Et.a,e.map((function(e){return{url:e.url}})))}),[]);return Object(S.useEffect)((function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a((function(n){var a=Object(ba.a)(n),r=a.findIndex((function(t){return t.url===e.url}));return t?a.splice(r,1):a[r]=Object(T.a)(Object(T.a)({},e),{},{fetchStatus:On.a.SUCCESS}),a}))},t=function(){var t=Object(L.a)(I.a.mark((function t(){var n,r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(pa.b)(Et.a);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:n=t.t0,r=n.map((function(e){return Object(T.a)(Object(T.a)(Object(T.a)({},Object(Et.e)()),e),{},{url:e.url.trim(),id:e.url.trim(),custom:!0})})),a(r),o(!0),r.forEach((function(t){Object(Et.d)(t.url).then((function(t){e(Object(T.a)(Object(T.a)({},t),{},{custom:!0}))})).catch((function(n){e(t,!0),Object(Lt.c)(Lt.b._900,"".concat(t.url,", ").concat(n.message))}))}));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),{customSafeApps:n,loaded:i,updateCustomSafeApps:s}}(),r=a.customSafeApps,c=a.updateCustomSafeApps,i=function(e,t){var n=Object(S.useState)([]),a=Object(D.a)(n,2),r=a[0],c=a[1],i=Object(S.useState)(!1),o=Object(D.a)(i,2),s=o[0],u=o[1];return Object(S.useEffect)((function(){var n=function(){var n=Object(L.a)(I.a.mark((function n(){var a,r;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(pa.b)(Et.b);case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0=[];case 5:a=n.t0,t===On.a.SUCCESS&&(r=a.filter((function(t){return e.some((function(e){return e.id===t}))})),c(r),u(!0));case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[t,e]),Object(S.useEffect)((function(){t===On.a.SUCCESS&&Object(pa.e)(Et.b,r)}),[r,t]),{pinnedSafeAppIds:r,loaded:s,updatePinnedSafeApps:c}}(t,n),o=i.pinnedSafeAppIds,s=i.updatePinnedSafeApps,u=n===On.a.LOADING,d=Object(F.g)().trackEvent,l=Object(S.useMemo)((function(){return[].concat(Object(ba.a)(t),Object(ba.a)(r)).sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}),[t,r]),j=Object(S.useMemo)((function(){return t.sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}),[t]),b=Object(S.useMemo)((function(){return r.filter((function(e){return!t.some((function(t){return t.url===e.url}))})).sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}),[r,t]),p=Object(S.useMemo)((function(){return j.filter((function(e){return o.includes(e.id)}))}),[o,j]),f=Object(S.useCallback)((function(e){var t=[].concat(Object(ba.a)(r),[e]);c(t)}),[c,r]),O=Object(S.useCallback)((function(e){var t=r.filter((function(t){return t.id!==e}));c(t)}),[c,r]),x=Object(S.useCallback)((function(e){var t=e.id,n=e.name,a=Object(ba.a)(o);o.includes(t)?(d(Object(T.a)(Object(T.a)({},F.a.PIN),{},{label:n})),a.splice(a.indexOf(t),1)):(d(Object(T.a)(Object(T.a)({},F.a.UNPIN),{},{label:n})),a.push(t)),s(a)}),[d,s,o]);return{allApps:l,appList:j,customApps:b,pinnedSafeApps:p,removeApp:O,togglePin:x,addCustomApp:f,isLoading:u}},Ta=n(2582),Ea=n(2583),Ia=n(582),La=Object(z.default)(Ea.a)(fa||(fa=Object(R.a)(["\n  display: flex;\n  margin-top: ",";\n  margin-bottom: ",";\n  box-shadow: 1px 2px 10px 0 rgba(212, 212, 211, 0.59);\n  box-sizing: border-box;\n  max-width: 100%;\n  padding: 52px 54px;\n  justify-content: center;\n  gap: ",";\n"])),(function(e){return e.theme.margin.md}),(function(e){return e.theme.margin.md}),(function(e){return e.theme.margin.sm})),Da=Object(z.default)(bn.a)(Oa||(Oa=Object(R.a)(["\n  height: 16px;\n  vertical-align: middle;\n"]))),Ra=function(){return Object(V.jsxs)(La,{children:[Object(V.jsx)(Wn.a,{alt:"Info",src:Ia.a}),Object(V.jsxs)(M.Text,{size:"xl",children:["Simply hover over an app and click on the",Object(V.jsx)(Da,{}),"to bookmark the app here for convenient access"]})]})},za=z.default.div(xa||(xa=Object(R.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),Ma=Object(z.css)(ha||(ha=Object(R.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Pa=z.default.div(ma||(ma=Object(R.a)(["\n  width: 100%;\n  height: 100%;\n  ",";\n"])),Ma),Na=Object(z.default)(rn.a.div)(ga||(ga=Object(R.a)(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(243px, 1fr));\n  column-gap: 20px;\n  row-gap: 20px;\n  justify-content: space-evenly;\n"]))),Ua=z.default.div(va||(va=Object(R.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  align-items: center;\n"]))),Ga=Object(z.default)(M.Text)(wa||(wa=Object(R.a)(["\n  width: 100%;\n  margin: ",";\n"])),(function(e){var t=e.theme;return"".concat(t.margin.xl," 0 ").concat(t.margin.md," 0")})),Ba=Object(z.default)(M.IconText)(Ca||(Ca=Object(R.a)(["\n  justify-content: center;\n  margin: 16px 55px 20px 0;\n"]))),Fa=function(){var e=Object(y.k)(),t=Object(y.m)(y.g.APPS,{shortName:Object(A.e)(),safeAddress:e}),n=Object(S.useState)(""),a=Object(D.a)(n,2),r=a[0],c=a[1],i=ka(),o=i.allApps,s=i.appList,u=i.removeApp,d=i.isLoading,l=i.pinnedSafeApps,j=i.togglePin,b=i.customApps,p=i.addCustomApp,f=function(e,t){var n=Object(S.useMemo)((function(){return new Ta.a(e,{keys:["name","description"],threshold:.2,findAllMatches:!0})}),[e]);return Object(S.useMemo)((function(){return t?n.search(t).map((function(e){return e.item})):e}),[n,e,t])}(s,r),O=Object(S.useState)(null),x=Object(D.a)(O,2),h=x[0],m=x[1],g=Object(Rn.a)(),v=g.open,w=g.toggle,C=g.clickAway,k=0===f.length&&r,T=!!b.length&&!r,E=!r,I=function(e){j(e)};return d||!e?Object(V.jsx)(Pa,{children:Object(V.jsx)(M.Loader,{size:"md"})}):Object(V.jsxs)(za,{children:[Object(V.jsx)(M.Menu,{children:Object(V.jsx)(sn.a,{start:"sm",xs:12,children:Object(V.jsx)(M.Breadcrumb,{children:Object(V.jsx)(M.BreadcrumbElement,{iconType:"apps",text:"Apps"})})})}),Object(V.jsxs)(Ua,{children:[Object(V.jsx)(Bn,{value:r,onValueChange:function(e){return c(e.replace(/\s{2,}/g," "))}}),E&&Object(V.jsxs)(on.a,{title:Object(V.jsx)(M.Text,{color:"placeHolder",strong:!0,size:"md",children:"BOOKMARKED APPS"}),defaultExpanded:!0,children:[0===l.length&&Object(V.jsx)(Ra,{}),Object(V.jsx)(cn.a,{children:Object(V.jsx)(Na,{"data-testid":"safe_apps__pinned-apps-container",children:l.map((function(e){return Object(V.jsx)(Ln,{to:"".concat(t,"?appUrl=").concat(encodeURI(e.url)),app:e,pinned:!0,onPin:I},e.id)}))})})]}),T&&Object(V.jsx)(on.a,{title:Object(V.jsx)(M.Text,{color:"placeHolder",strong:!0,size:"md",children:"CUSTOM APPS"}),defaultExpanded:!0,children:Object(V.jsx)(cn.a,{children:Object(V.jsx)(Na,{children:b.map((function(e){return Object(V.jsx)(Ln,{to:"".concat(t,"?appUrl=").concat(encodeURI(e.url)),app:e,onRemove:m},e.id)}))})})}),Object(V.jsx)(Ga,{color:"placeHolder",strong:!0,size:"md",children:r?"SEARCH RESULTS":"ALL APPS"}),k&&Object(V.jsx)(Hn,{query:r,onWalletConnectSearch:function(){return c("WalletConnect")}}),Object(V.jsx)(cn.a,{children:Object(V.jsxs)(Na,{"data-testid":"safe_apps__all-apps-container",children:[!r&&Object(V.jsx)(Dn,{onClick:w}),f.map((function(e){return Object(V.jsx)(Ln,{to:"".concat(t,"?appUrl=").concat(encodeURIComponent(e.url)),app:e,onPin:I,pinned:l.some((function(t){return t.id===e.id}))},e.id)}))]})})]}),Object(V.jsx)(Ba,{color:"secondary",iconSize:"sm",iconType:"info",text:"These are third-party apps, which means they are not owned, controlled, maintained or audited by Gnosis. Interacting with the apps is at your own risk. Any communication within the Apps is for informational purposes only and must not be construed as investment advice to engage in any transaction.",textSize:"sm"}),v&&Object(V.jsxs)(q.b,{title:"Add app",description:"Add a custom app to the list of apps",handleClose:C,children:[Object(V.jsx)(q.b.Header,{onClose:C,children:Object(V.jsx)(q.b.Header.Title,{children:"Add custom app"})}),Object(V.jsx)(ja,{closeModal:C,appList:o,onAddApp:p})]}),h&&Object(V.jsxs)(q.b,{title:"Remove app",description:"Confirm for the app removal",handleClose:function(){return m(null)},children:[Object(V.jsx)(q.b.Header,{onClose:function(){return m(null)},children:Object(V.jsx)(q.b.Header.Title,{children:"Remove app"})}),Object(V.jsx)(q.b.Body,{children:Object(V.jsxs)(M.Text,{size:"xl",children:["This action will remove"," ",Object(V.jsx)(M.Text,{size:"xl",strong:!0,as:"span",children:h.name})," ","from the interface"]})}),Object(V.jsx)(q.b.Footer,{children:Object(V.jsx)(q.b.Footer.Buttons,{cancelButtonProps:{onClick:function(){return m(null)}},confirmButtonProps:{color:"error",onClick:function(){u(h.id),m(null)},text:"Remove"}})})]})]})},_a=function(e){var t=e.onCancel,n=e.onConfirm;return Object(V.jsx)(M.FixedDialog,{body:Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(M.Text,{size:"md",children:"You are now accessing third-party apps, which we do not own, control, maintain or audit. We are not liable for any loss you may suffer in connection with interacting with the apps, which is at your own risk. You must read our Terms, which contain more detailed provisions binding on you relating to the apps."}),Object(V.jsx)("br",{}),Object(V.jsxs)(M.Text,{size:"md",children:["I have read and understood the"," ",Object(V.jsx)("a",{href:"https://gnosis-safe.io/terms",rel:"noopener noreferrer",target:"_blank",children:"Terms"})," ","and this Disclaimer, and agree to be bound by them."]})]}),onCancel:t,onConfirm:n,title:"Disclaimer"})},Ha="APPS_LEGAL_CONSENT_RECEIVED";t.default=function(){var e=Object(w.h)(),t=Object(C.d)(k.a).address,n=(0,function(){var e=Object(w.i)().search;return{getAppUrl:Object(S.useCallback)((function(){return new URLSearchParams(e).get("appUrl")}),[e])}}().getAppUrl)(),a=function(){var e=Object(S.useState)(),t=Object(D.a)(e,2),n=t[0],a=t[1];return Object(S.useEffect)((function(){var e=function(){var e=Object(L.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pa.b)(Ha);case 2:t=e.sent,a(!!t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),{consentReceived:n,onConsentReceipt:Object(S.useCallback)((function(){a(!0),Object(pa.e)(Ha,!0)}),[])}}(),r=a.consentReceived,c=a.onConsentReceipt;return n?r?Object(V.jsx)(an,{appUrl:n}):Object(V.jsx)(_a,{onCancel:function(){return e.push(Object(y.m)(y.g.ASSETS_BALANCES,{shortName:Object(A.e)(),safeAddress:t}))},onConfirm:c}):Object(V.jsx)(Fa,{})}}}]);
//# sourceMappingURL=63.a23e6ff8.chunk.js.map